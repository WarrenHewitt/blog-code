(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{249:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#语法"}},[t._v("语法")])]),a("li",[a("a",{attrs:{href:"#django"}},[t._v("Django")])]),a("li",[a("a",{attrs:{href:"#scrapy"}},[t._v("scrapy")])])])]),t._v(" "),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#语法"}},[t._v("语法")])]),a("li",[a("a",{attrs:{href:"#django"}},[t._v("Django")])]),a("li",[a("a",{attrs:{href:"#scrapy"}},[t._v("scrapy")])])])]),a("p"),t._v(" "),a("hr"),t._v(" "),a("ul",[a("li",[t._v("Ctrl+Z，再按回车 退出命令行")]),t._v(" "),a("li",[t._v("python -m pip install --upgrade pip  升级pip")]),t._v(" "),a("li",[t._v("A-Z 65-90; a-z:97-122")])]),t._v(" "),a("h3",{attrs:{id:"语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[t._v("#")]),t._v(" 语法")]),t._v(" "),a("blockquote",[a("p",[t._v("官方地址 https://docs.python.org/3/tutorial/index.html")])]),t._v(" "),a("p",[a("code",[t._v("pass")]),t._v(": 仅仅是占位 因为有的地方如果没有占位会报错，比如函数声明不能是空函数")]),t._v(" "),a("h4",{attrs:{id:"win10-开机获取本机ip并写入文件中"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#win10-开机获取本机ip并写入文件中"}},[t._v("#")]),t._v(" win10 开机获取本机IP并写入文件中")]),t._v(" "),a("p",[t._v("运行：shell:startup")]),t._v(" "),a("p",[t._v("创建 .bat文件(如a.bat) 放入打开的启动文件夹")]),t._v(" "),a("p",[t._v(".bat文件内容")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('@echo off\nstart cmd /k "python文件地址 && python ip.py"\n')])])]),a("p",[t._v("python文件内容")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" socket\n\nhostname "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getfqdn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gethostname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\naddress "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gethostbyname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hostname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("file")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./ip.txt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'w'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" encoding "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hostname "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'：'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" address\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("write"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("except")]),t._v(" OSError"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'没有文件'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pass")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("close"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'finally success:'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"django"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#django"}},[t._v("#")]),t._v(" Django")]),t._v(" "),a("h4",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("blockquote",[a("p",[t._v("参考官网 https://docs.djangoproject.com/en/2.1/topics/install/#installing-official-release")])]),t._v(" "),a("ul",[a("li",[t._v("注意与python版本对应")]),t._v(" "),a("li",[t._v("使用pip安装(时间慢)")])]),t._v(" "),a("h4",{attrs:{id:"项目-包含应用与配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目-包含应用与配置"}},[t._v("#")]),t._v(" 项目(包含应用与配置)")]),t._v(" "),a("ul",[a("li",[t._v("创建project: django-admin startproject mysite(名称)")]),t._v(" "),a("li",[t._v("进入创建的project(与manage.py同级)，创建应用: python manage.py startapp appname")]),t._v(" "),a("li",[t._v("添加新文件，将不会触发自动重新加载，这时你得自己手动重启服务器")]),t._v(" "),a("li",[t._v("监听所有服务器的公开IP（你运行 Vagrant 或想要向网络上的其它电脑展示你的成果时很有用） python manage.py runserver 0:8000; 0 是 0.0.0.0 的简写")])]),t._v(" "),a("h5",{attrs:{id:"文件解释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件解释"}},[t._v("#")]),t._v(" 文件解释")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("|- manege.py: 与项目进行交互的命令行工具集的入口\n|- project name (项目名称，文件夹也是该名称)\n|--- wsgi.py :python应用与web服务器之间的接口(一般不作更改)\n|--- urls.py : URL 配置文件\n|--- settings.py : 项目总配置文件，数据库，web应用，时间等配置\n      BASE_DIR：项目根目录\n      DEBUG：调试用，生产环境要关闭，打开后所有的无效访问都不会走400\n      ALLOWED_HOSTS：只允许哪些域名的访问，其它的全部报400\n      INSTALLED_APPS：自己创建的应用要加到这里面\n      TEMPLATES：模板的配置\n      _init_.py 声明模块的文件，一般内容为空，有了它，tutorial 才能在代码中被当作模块应用\n|--- appname (应用名称)\n|----\n")])])]),a("hr"),t._v(" "),a("h3",{attrs:{id:"scrapy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scrapy"}},[t._v("#")]),t._v(" scrapy")]),t._v(" "),a("ul",[a("li",[t._v("报错 Spider must return Request, BaseItem, dict or None, 表示没有返回正确yield 后面的值")])]),t._v(" "),a("h4",{attrs:{id:"安装-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-2"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("pip install Scrapy\n")])])]),a("ul",[a("li",[a("p",[t._v('安装scrapy报错：Microsoft Visual C++ 14.0 is required. Get it with "Microsoft Visual C++ Build Tools"')]),t._v(" "),a("ol",[a("li",[t._v("https://www.lfd.uci.edu/~gohlke/pythonlibs/#twisted 下载对应版本twisted的whl文件")]),t._v(" "),a("li",[t._v("cp:python版本")]),t._v(" "),a("li",[t._v("amd64：64位")]),t._v(" "),a("li",[t._v("下载后在文件目录下执行： pip install Twisted-18.7.0-cp37-cp37m-win_amd64.whl(文件名)")])])]),t._v(" "),a("li",[a("p",[t._v("scrapy startproject youName  创建项目")])]),t._v(" "),a("li",[a("p",[t._v("scrapy genspider < name> < domain> 创建spider(在项目跟目录执行)")])]),t._v(" "),a("li",[a("p",[t._v("scrapy crawl(爬) spider名称")]),t._v(" "),a("ul",[a("li",[t._v("第一次执行会报错async语法错误 把用到该名称作为参数的文件全部作修改 把这个参数名改为其它即可")]),t._v(" "),a("li",[t._v("报错 No module named 'win32api'： https://pypi.org/project/pypiwin32/#files（下载文件pypiwin32-223-py3-none-any.whl 执行 pip install pypiwin32-223-py3-none-any.whl ）")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("[scrapy.spidermiddlewares.offsite] DEBUG: Filtered offsite request to:")]),t._v("表示request的地址和allow_domain地址冲突，被过滤。")])]),t._v(" "),a("li",[a("p",[t._v("设置 yield Request(url, callback=self.parse_item, "),a("em",[a("strong",[t._v("dont_filter=True")])]),t._v(")")])])]),t._v(" "),a("p",[t._v("导出为json\nscrapy crawl spider名称 -o test.json")]),t._v(" "),a("p",[t._v("注意配置FEED_EXPORT_ENCODING = 'utf-8' 否则中文会被转码")]),t._v(" "),a("p",[t._v("报403时注意把USER_AGENT加上")]),t._v(" "),a("p",[t._v("text() 获取文本\n@属性名  获取属性值")]),t._v(" "),a("p",[t._v("在父节点下使用xpath路径前要加./")]),t._v(" "),a("p",[t._v("去除换行空格用 xpath('normalize-space('.//div/text()')')")]),t._v(" "),a("p",[t._v("css:")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("获取内容\ncss('::text')")])]),t._v(" "),a("li",[a("p",[t._v("返回属性值\nresponse.css('.logo a::attr(href)').extract() 返回的值数组")])]),t._v(" "),a("li",[a("p",[t._v("去掉空格\npython字符串对象的 strip() 方法")])]),t._v(" "),a("li",[a("p",[t._v("去掉换行\npython字符串对象的 .replace('\\n', '')")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);
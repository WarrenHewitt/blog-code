(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{233:function(e,t,r){"use strict";r.r(t);var o=r(0),n=Object(o.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"获取微信用户信息"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#获取微信用户信息"}},[e._v("#")]),e._v(" 获取微信用户信息")]),e._v(" "),r("blockquote",[r("p",[e._v("create-at 2019-04-02")])]),e._v(" "),r("p",[r("a",{attrs:{href:"https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1421140842",target:"_blank",rel:"noopener noreferrer"}},[e._v("官方文档"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("总共4步：")]),e._v(" "),r("ol",[r("li",[e._v("第一步：用户同意授权，获取code")]),e._v(" "),r("li",[e._v("第二步：通过code换取网页授权access_token")]),e._v(" "),r("li",[e._v("第三步：刷新access_token（如果需要）")]),e._v(" "),r("li",[e._v("第四步：拉取用户信息(需scope为 snsapi_userinfo)")])]),e._v(" "),r("p",[r("strong",[e._v("这里只对前端需要做的工作进行说明")])]),e._v(" "),r("p",[e._v("前端需要做的只有"),r("strong",[e._v("第一步")]),e._v("，因为出于安全考虑，敏感信息不能传给客户端；即便强行用前端来处理整个过程，微信那边也有检测，不会将敏感信息返回。")]),e._v(" "),r("p",[e._v("前端部分：")]),e._v(" "),r("ul",[r("li",[e._v("(1) 获取appid：这个由自己公司后端人员提供接口获取")]),e._v(" "),r("li",[e._v("(2) 调用如下接口：参数一定要按顺序；redirect_uri可以带上参数一起转码，转码用encodeURIComponent;实测是用location.href访问的该接口,没有异常")])]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("https://open.weixin.qq.com/connect/oauth2/authorize?appid=APPID&redirect_uri=REDIRECT_URI&response_type=code&scope=SCOPE&state=STATE#wechat_redirect\n具体参数的意义请参考上方官方文档\n")])])]),r("ul",[r("li",[e._v("(3) 获取code：跳转到重定向的页面后code会跟在url链接上，如果重定向的地址也带有参数，code会拼接在其后边")]),e._v(" "),r("li",[e._v("(4) 将code传给后端，返回用户信息")])]),e._v(" "),r("p",[e._v("本篇文章只是做了整个流程说明与坑点，详见上方官方文档")]),e._v(" "),r("blockquote",[r("p",[e._v("欢迎交流 "),r("a",{attrs:{href:"https://github.com/WarrenHewitt/blog/issues",target:"_blank",rel:"noopener noreferrer"}},[e._v("Github"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=n.exports}}]);